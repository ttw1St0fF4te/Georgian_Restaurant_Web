{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/keluch/Desktop/coledj/4year/coursework2/georgian_restaurant_web/src/lib/providers/query-provider.tsx"],"sourcesContent":["'use client';\n\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\nimport { useState } from 'react';\n\nexport default function QueryProvider({ children }: { children: React.ReactNode }) {\n  const [queryClient] = useState(\n    () =>\n      new QueryClient({\n        defaultOptions: {\n          queries: {\n            staleTime: 60 * 1000, // 1 минута\n            refetchOnWindowFocus: false,\n            retry: (failureCount, error: any) => {\n              // Не повторяем запросы для 4xx ошибок\n              if (error?.status >= 400 && error?.status < 500) {\n                return false;\n              }\n              return failureCount < 3;\n            },\n          },\n          mutations: {\n            retry: false,\n          },\n        },\n      })\n  );\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      {children}\n      {process.env.NODE_ENV === 'development' && <ReactQueryDevtools />}\n    </QueryClientProvider>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;AAJA;;;;;AAMe,SAAS,cAAc,EAAE,QAAQ,EAAiC;IAC/E,MAAM,CAAC,YAAY,GAAG,IAAA,iNAAQ,EAC5B,IACE,IAAI,4LAAW,CAAC;YACd,gBAAgB;gBACd,SAAS;oBACP,WAAW,KAAK;oBAChB,sBAAsB;oBACtB,OAAO,CAAC,cAAc;wBACpB,sCAAsC;wBACtC,IAAI,OAAO,UAAU,OAAO,OAAO,SAAS,KAAK;4BAC/C,OAAO;wBACT;wBACA,OAAO,eAAe;oBACxB;gBACF;gBACA,WAAW;oBACT,OAAO;gBACT;YACF;QACF;IAGJ,qBACE,8OAAC,6MAAmB;QAAC,QAAQ;;YAC1B;YACA,oDAAyB,+BAAiB,8OAAC,0MAAkB;;;;;;;;;;;AAGpE","debugId":null}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///Users/keluch/Desktop/coledj/4year/coursework2/georgian_restaurant_web/src/lib/providers/mui-provider.tsx"],"sourcesContent":["'use client';\n\nimport { ThemeProvider, createTheme } from '@mui/material/styles';\nimport CssBaseline from '@mui/material/CssBaseline';\n\nconst theme = createTheme({\n  palette: {\n    mode: 'light',\n    primary: {\n      main: '#1976d2',\n    },\n    secondary: {\n      main: '#dc004e',\n    },\n  },\n});\n\nexport default function MuiThemeProvider({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      {children}\n    </ThemeProvider>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AAHA;;;;AAKA,MAAM,QAAQ,IAAA,0NAAW,EAAC;IACxB,SAAS;QACP,MAAM;QACN,SAAS;YACP,MAAM;QACR;QACA,WAAW;YACT,MAAM;QACR;IACF;AACF;AAEe,SAAS,iBAAiB,EACvC,QAAQ,EAGT;IACC,qBACE,8OAAC,gOAAa;QAAC,OAAO;;0BACpB,8OAAC,iLAAW;;;;;YACX;;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":["file:///Users/keluch/Desktop/coledj/4year/coursework2/georgian_restaurant_web/src/lib/auth.ts"],"sourcesContent":["import axios from 'axios';\n\n// Конфигурация API\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000';\n\n// Типы для аутентификации\nexport interface User {\n  user_id: string;\n  username: string;\n  email: string;\n  first_name: string;\n  last_name: string;\n  phone?: string;\n  country?: string;\n  city?: string;\n  street_address?: string;\n  role: 'admin' | 'manager' | 'user' | 'guest';\n  role_id: number;\n  created_at?: string;\n  last_login?: string;\n}\n\nexport interface LoginCredentials {\n  usernameOrEmail: string;\n  password: string;\n}\n\nexport interface RegisterData {\n  username: string;\n  email: string;\n  password: string;\n  first_name: string;\n  last_name: string;\n  phone?: string;\n}\n\nexport interface AuthResponse {\n  access_token: string;\n  user: User;\n}\n\nexport interface RegisterResponse {\n  status: string;\n  message: string;\n  user: User;\n  created_at: string;\n}\n\nexport interface UpdateProfileData {\n  first_name?: string;\n  last_name?: string;\n  phone?: string;\n  country?: string;\n  city?: string;\n  street_address?: string;\n}\n\nexport interface ChangePasswordData {\n  current_password: string;\n  new_password: string;\n}\n\n// Класс для работы с аутентификацией\nclass AuthService {\n  private readonly TOKEN_KEY = 'georgian_restaurant_token';\n  private readonly USER_KEY = 'georgian_restaurant_user';\n  private readonly API_URL = API_BASE_URL;\n\n  // Проверка, выполняется ли код на клиенте\n  private isClient = typeof window !== 'undefined';\n\n  // Настройка axios с автоматическим добавлением токена\n  private api = axios.create({\n    baseURL: this.API_URL,\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n\n  constructor() {\n    // Интерцептор для автоматического добавления токена\n    this.api.interceptors.request.use((config) => {\n      const token = this.getToken();\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n      return config;\n    });\n\n    // Интерцептор для обработки ошибок авторизации\n    this.api.interceptors.response.use(\n      (response) => response,\n      (error) => {\n        if (error.response?.status === 401) {\n          // Проверяем, не является ли это ошибкой смены пароля или другими операциями,\n          // где 401 не означает недействительность токена\n          const url = error.config?.url;\n          const isPasswordChangeError = url && (url.includes('/auth/change-password') || url.includes('/auth/profile/password'));\n          const isLoginError = url && url.includes('/auth/login');\n          \n          // Не разлогиниваем пользователя при ошибках смены пароля или входа\n          if (!isPasswordChangeError && !isLoginError) {\n            // Токен недействителен - очищаем данные\n            this.clearAuthData();\n            // Редирект на страницу входа (только на клиенте)\n            if (this.isClient && window.location.pathname !== '/auth/login') {\n              window.location.href = '/auth/login';\n            }\n          }\n        }\n        return Promise.reject(error);\n      }\n    );\n  }\n\n  // Сохранение данных авторизации\n  setAuthData(token: string, user: User): void {\n    if (!this.isClient) return;\n    \n    localStorage.setItem(this.TOKEN_KEY, token);\n    localStorage.setItem(this.USER_KEY, JSON.stringify(user));\n  }\n\n  // Получение токена\n  getToken(): string | null {\n    if (!this.isClient) return null;\n    return localStorage.getItem(this.TOKEN_KEY);\n  }\n\n  // Получение данных пользователя\n  getUser(): User | null {\n    if (!this.isClient) return null;\n    \n    const userStr = localStorage.getItem(this.USER_KEY);\n    if (!userStr) return null;\n    \n    try {\n      return JSON.parse(userStr);\n    } catch {\n      return null;\n    }\n  }\n\n  // Проверка авторизации\n  isAuthenticated(): boolean {\n    return !!this.getToken() && !!this.getUser();\n  }\n\n  // Проверка срока действия токена\n  isTokenExpired(): boolean {\n    const token = this.getToken();\n    if (!token) return true;\n\n    try {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      return Date.now() >= payload.exp * 1000;\n    } catch {\n      return true;\n    }\n  }\n\n  // Очистка данных авторизации\n  clearAuthData(): void {\n    if (!this.isClient) return;\n    \n    localStorage.removeItem(this.TOKEN_KEY);\n    localStorage.removeItem(this.USER_KEY);\n  }\n\n  // Вход в систему\n  async login(credentials: LoginCredentials): Promise<AuthResponse> {\n    try {\n      const response = await this.api.post<AuthResponse>('/auth/login', credentials);\n      const { access_token, user } = response.data;\n      \n      this.setAuthData(access_token, user);\n      return response.data;\n    } catch (error: any) {\n      // Улучшенная обработка ошибок\n      if (error.response?.status === 400) {\n        const message = error.response.data?.message;\n        if (Array.isArray(message)) {\n          // Переводим ошибки валидации на русский\n          const translatedErrors = message.map((msg: string) => {\n            if (msg.includes('password must be longer than or equal to')) {\n              return 'Пароль должен содержать минимум 6 символов';\n            }\n            if (msg.includes('username must be longer than or equal to')) {\n              return 'Имя пользователя должно содержать минимум 3 символа';\n            }\n            if (msg.includes('email must be an email')) {\n              return 'Введите корректный email адрес';\n            }\n            if (msg.includes('username should not be empty')) {\n              return 'Введите имя пользователя';\n            }\n            if (msg.includes('password should not be empty')) {\n              return 'Введите пароль';\n            }\n            return msg; // Возвращаем оригинальное сообщение если перевод не найден\n          });\n          throw new Error(translatedErrors.join(', '));\n        } else if (typeof message === 'string') {\n          if (message.includes('password must be longer than or equal to')) {\n            throw new Error('Пароль должен содержать минимум 6 символов');\n          }\n          if (message.includes('username must be longer than or equal to')) {\n            throw new Error('Имя пользователя должно содержать минимум 3 символа');\n          }\n          if (message.includes('email must be an email')) {\n            throw new Error('Введите корректный email адрес');\n          }\n          throw new Error(message);\n        }\n        throw new Error('Ошибка валидации данных');\n      } else if (error.response?.status === 401) {\n        throw new Error('Неверный логин или пароль');\n      } else if (error.response?.status === 403) {\n        throw new Error('Доступ запрещен');\n      } else if (error.response?.status === 500) {\n        throw new Error('Внутренняя ошибка сервера. Попробуйте позже');\n      } else if (error.code === 'NETWORK_ERROR' || !error.response) {\n        throw new Error('Ошибка сети. Проверьте подключение к интернету');\n      }\n      \n      // Если не удалось определить тип ошибки\n      throw new Error(error.response?.data?.message || 'Произошла неизвестная ошибка');\n    }\n  }\n\n  // Регистрация\n  async register(data: RegisterData): Promise<RegisterResponse> {\n    try {\n      const response = await this.api.post<RegisterResponse>('/auth/register', data);\n      return response.data;\n    } catch (error: any) {\n      // Улучшенная обработка ошибок для регистрации\n      if (error.response?.status === 400) {\n        const message = error.response.data?.message;\n        if (Array.isArray(message)) {\n          // Переводим ошибки валидации на русский\n          const translatedErrors = message.map((msg: string) => {\n            if (msg.includes('password must be longer than or equal to')) {\n              return 'Пароль должен содержать минимум 8 символов';\n            }\n            if (msg.includes('username must be longer than or equal to')) {\n              return 'Имя пользователя должно содержать минимум 3 символа';\n            }\n            if (msg.includes('email must be an email')) {\n              return 'Введите корректный email адрес';\n            }\n            if (msg.includes('first_name must be longer than or equal to')) {\n              return 'Имя должно содержать минимум 2 символа';\n            }\n            if (msg.includes('last_name must be longer than or equal to')) {\n              return 'Фамилия должна содержать минимум 2 символа';\n            }\n            if (msg.includes('should not be empty')) {\n              if (msg.includes('username')) return 'Введите имя пользователя';\n              if (msg.includes('password')) return 'Введите пароль';\n              if (msg.includes('email')) return 'Введите email';\n              if (msg.includes('first_name')) return 'Введите имя';\n              if (msg.includes('last_name')) return 'Введите фамилию';\n            }\n            return msg; // Возвращаем оригинальное сообщение если перевод не найден\n          });\n          throw new Error(translatedErrors.join(', '));\n        } else if (typeof message === 'string') {\n          if (message.includes('already exists') || message.includes('уже существует')) {\n            if (message.includes('username') || message.includes('пользователь')) {\n              throw new Error('Пользователь с таким именем уже существует');\n            }\n            if (message.includes('email') || message.includes('почта')) {\n              throw new Error('Пользователь с таким email уже существует');\n            }\n          }\n          throw new Error(message);\n        }\n        throw new Error('Ошибка валидации данных');\n      } else if (error.response?.status === 409) {\n        throw new Error('Пользователь с такими данными уже существует');\n      } else if (error.response?.status === 500) {\n        throw new Error('Внутренняя ошибка сервера. Попробуйте позже');\n      } else if (error.code === 'NETWORK_ERROR' || !error.response) {\n        throw new Error('Ошибка сети. Проверьте подключение к интернету');\n      }\n      \n      // Если не удалось определить тип ошибки\n      throw new Error(error.response?.data?.message || 'Произошла неизвестная ошибка при регистрации');\n    }\n  }\n\n  // Получение профиля\n  async getProfile(): Promise<User> {\n    try {\n      const response = await this.api.get<User>('/auth/profile');\n      \n      // Обновляем данные пользователя в localStorage с полученными данными\n      const token = this.getToken();\n      if (token) {\n        this.setAuthData(token, response.data);\n      }\n      \n      return response.data;\n    } catch (error: any) {\n      if (error.response?.status === 401) {\n        throw new Error('Сессия истекла. Войдите в систему снова');\n      } else if (error.response?.status === 403) {\n        throw new Error('Доступ запрещен');\n      } else if (error.response?.status === 500) {\n        throw new Error('Внутренняя ошибка сервера. Попробуйте позже');\n      } else if (error.code === 'NETWORK_ERROR' || !error.response) {\n        throw new Error('Ошибка сети. Проверьте подключение к интернету');\n      }\n      \n      throw new Error(error.response?.data?.message || 'Ошибка получения профиля');\n    }\n  }\n\n  // Обновление профиля\n  async updateProfile(data: UpdateProfileData): Promise<{ status: string; message: string; updated_user_id: string }> {\n    console.log('Отправка данных профиля:', data);\n    try {\n      const response = await this.api.put('/auth/profile', data);\n      console.log('Ответ сервера:', response.data);\n      \n      // Обновляем данные пользователя в localStorage\n      const currentUser = this.getUser();\n      if (currentUser) {\n        const updatedUser = { ...currentUser, ...data };\n        this.setAuthData(this.getToken()!, updatedUser);\n      }\n      \n      return response.data;\n    } catch (error: any) {\n      console.error('Ошибка обновления профиля:', error.response?.data || error.message);\n      if (error.response?.status === 400) {\n        const message = error.response.data?.message;\n        if (Array.isArray(message)) {\n          const translatedErrors = message.map((msg: string) => {\n            // Переводы ошибок валидации\n            if (msg.includes('first_name must be longer than or equal to') || msg.includes('Имя должно быть от')) {\n              return 'Имя должно содержать минимум 2 символа';\n            }\n            if (msg.includes('last_name must be longer than or equal to') || msg.includes('Фамилия должна быть от')) {\n              return 'Фамилия должна содержать минимум 2 символа';\n            }\n            if (msg.includes('phone must match') || msg.includes('Телефон должен быть в международном формате')) {\n              return 'Телефон должен быть в международном формате, например +79161234567';\n            }\n            if (msg.includes('country must be longer than or equal to') || msg.includes('Название страны должно быть от')) {\n              return 'Название страны должно быть от 2 до 100 символов';\n            }\n            if (msg.includes('city must be longer than or equal to') || msg.includes('Название города должно быть от')) {\n              return 'Название города должно быть от 2 до 100 символов';\n            }\n            if (msg.includes('street_address must be longer than or equal to') || msg.includes('Адрес должен быть от')) {\n              return 'Адрес должен быть от 5 до 500 символов';\n            }\n            if (msg.includes('should not be empty')) {\n              if (msg.includes('first_name')) return 'Введите имя';\n              if (msg.includes('last_name')) return 'Введите фамилию';\n              if (msg.includes('phone')) return 'Введите номер телефона';\n              if (msg.includes('country')) return 'Введите страну';\n              if (msg.includes('city')) return 'Введите город';\n              if (msg.includes('street_address')) return 'Введите адрес';\n            }\n            // Возвращаем исходное сообщение, если перевод не найден\n            return msg;\n          });\n          throw new Error(translatedErrors.join(', '));\n        }\n        throw new Error(message || 'Ошибка валидации данных');\n      } else if (error.response?.status === 401) {\n        throw new Error('Сессия истекла. Войдите в систему снова');\n      } else if (error.response?.status === 403) {\n        throw new Error('Доступ запрещен');\n      } else if (error.response?.status === 500) {\n        throw new Error('Внутренняя ошибка сервера. Попробуйте позже');\n      } else if (error.code === 'NETWORK_ERROR' || !error.response) {\n        throw new Error('Ошибка сети. Проверьте подключение к интернету');\n      }\n      \n      throw new Error(error.response?.data?.message || 'Ошибка обновления профиля');\n    }\n  }\n\n  // Смена пароля\n  async changePassword(data: ChangePasswordData): Promise<{ status: string; message: string; updated_user_id: string }> {\n    try {\n      const response = await this.api.post('/auth/profile/password', data);\n      return response.data;\n    } catch (error: any) {\n      if (error.response?.status === 400) {\n        const message = error.response.data?.message;\n        if (Array.isArray(message)) {\n          const translatedErrors = message.map((msg: string) => {\n            if (msg.includes('password must be longer than or equal to')) {\n              return 'Новый пароль должен содержать минимум 8 символов';\n            }\n            if (msg.includes('current_password is incorrect')) {\n              return 'Неверный текущий пароль';\n            }\n            if (msg.includes('should not be empty')) {\n              if (msg.includes('current_password')) return 'Введите текущий пароль';\n              if (msg.includes('new_password')) return 'Введите новый пароль';\n            }\n            return msg;\n          });\n          throw new Error(translatedErrors.join(', '));\n        } else if (typeof message === 'string') {\n          if (message.includes('current_password is incorrect') || message.includes('Неверный пароль')) {\n            throw new Error('Неверный текущий пароль');\n          }\n          throw new Error(message);\n        }\n        throw new Error('Ошибка валидации данных');\n      } else if (error.response?.status === 401) {\n        // 401 при смене пароля обычно означает неверный текущий пароль\n        const message = error.response.data?.message;\n        if (message && (message.includes('current_password') || message.includes('Unauthorized') || message.includes('пароль'))) {\n          throw new Error('Неверный текущий пароль');\n        }\n        throw new Error('Ошибка авторизации при смене пароля');\n      } else if (error.response?.status === 403) {\n        throw new Error('Доступ запрещен');\n      } else if (error.response?.status === 500) {\n        throw new Error('Внутренняя ошибка сервера. Попробуйте позже');\n      } else if (error.code === 'NETWORK_ERROR' || !error.response) {\n        throw new Error('Ошибка сети. Проверьте подключение к интернету');\n      }\n      \n      throw new Error(error.response?.data?.message || 'Ошибка смены пароля');\n    }\n  }\n\n  // Выход из системы\n  async logout(): Promise<void> {\n    try {\n      // Уведомляем сервер о выходе\n      await this.api.post('/auth/logout');\n    } catch (error) {\n      // Игнорируем ошибки при logout - главное очистить локальные данные\n      console.warn('Logout request failed:', error);\n    } finally {\n      // Очищаем локальные данные\n      this.clearAuthData();\n    }\n  }\n\n  // Проверка роли пользователя\n  hasRole(role: User['role']): boolean {\n    const user = this.getUser();\n    return user?.role === role;\n  }\n\n  // Проверка разрешений\n  canAccess(allowedRoles: User['role'][]): boolean {\n    const user = this.getUser();\n    return user ? allowedRoles.includes(user.role) : false;\n  }\n}\n\n// Экспортируем экземпляр сервиса\nexport const authService = new AuthService();\nexport default authService;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 567, "column": 0}, "map": {"version":3,"sources":["file:///Users/keluch/Desktop/coledj/4year/coursework2/georgian_restaurant_web/src/lib/auth-context.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useEffect, useState, ReactNode } from 'react';\nimport { authService, User } from '@/lib/auth';\n\ninterface AuthContextType {\n  user: User | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  login: (usernameOrEmail: string, password: string) => Promise<void>;\n  register: (data: {\n    username: string;\n    email: string;\n    password: string;\n    first_name: string;\n    last_name: string;\n    phone?: string;\n  }) => Promise<void>;\n  logout: () => Promise<void>;\n  updateUser: (user: User) => void;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const isAuthenticated = !!user;\n\n  // Инициализация - проверяем сохраненные данные и получаем свежий профиль\n  useEffect(() => {\n    const initAuth = async () => {\n      try {\n        const savedUser = authService.getUser();\n        const token = authService.getToken();\n        \n        if (savedUser && token && !authService.isTokenExpired()) {\n          // Сначала устанавливаем сохраненного пользователя\n          setUser(savedUser);\n          \n          // Затем пытаемся получить свежие данные с сервера\n          try {\n            const freshUserData = await authService.getProfile();\n            console.log('🔄 Обновленные данные профиля:', freshUserData);\n            setUser(freshUserData);\n          } catch (error) {\n            console.warn('Не удалось получить свежие данные профиля, используем сохраненные:', error);\n            // Оставляем сохраненные данные если не удалось получить свежие\n          }\n        } else {\n          // Токен истек или данные некорректны\n          authService.clearAuthData();\n        }\n      } catch (error) {\n        console.error('Auth initialization error:', error);\n        authService.clearAuthData();\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    initAuth();\n  }, []);\n\n  const login = async (usernameOrEmail: string, password: string): Promise<void> => {\n    try {\n      const response = await authService.login({ usernameOrEmail, password });\n      setUser(response.user);\n    } catch (error) {\n      throw error;\n    }\n  };\n\n  const register = async (data: {\n    username: string;\n    email: string;\n    password: string;\n    first_name: string;\n    last_name: string;\n    phone?: string;\n  }): Promise<void> => {\n    try {\n      await authService.register(data);\n      // После регистрации не логиним автоматически\n    } catch (error) {\n      throw error;\n    }\n  };\n\n  const logout = async (): Promise<void> => {\n    try {\n      await authService.logout();\n      setUser(null);\n    } catch (error) {\n      // Даже если запрос не удался, очищаем локальные данные\n      console.error('Logout error:', error);\n      authService.clearAuthData();\n      setUser(null);\n    }\n  };\n\n  const updateUser = (updatedUser: User): void => {\n    setUser(updatedUser);\n  };\n\n  const value: AuthContextType = {\n    user,\n    isAuthenticated,\n    isLoading,\n    login,\n    register,\n    logout,\n    updateUser,\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = (): AuthContextType => {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAsBA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAMxD,MAAM,eAA4C,CAAC,EAAE,QAAQ,EAAE;IACpE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,MAAM,kBAAkB,CAAC,CAAC;IAE1B,yEAAyE;IACzE,IAAA,kNAAS,EAAC;QACR,MAAM,WAAW;YACf,IAAI;gBACF,MAAM,YAAY,iIAAW,CAAC,OAAO;gBACrC,MAAM,QAAQ,iIAAW,CAAC,QAAQ;gBAElC,IAAI,aAAa,SAAS,CAAC,iIAAW,CAAC,cAAc,IAAI;oBACvD,kDAAkD;oBAClD,QAAQ;oBAER,kDAAkD;oBAClD,IAAI;wBACF,MAAM,gBAAgB,MAAM,iIAAW,CAAC,UAAU;wBAClD,QAAQ,GAAG,CAAC,kCAAkC;wBAC9C,QAAQ;oBACV,EAAE,OAAO,OAAO;wBACd,QAAQ,IAAI,CAAC,sEAAsE;oBACnF,+DAA+D;oBACjE;gBACF,OAAO;oBACL,qCAAqC;oBACrC,iIAAW,CAAC,aAAa;gBAC3B;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,8BAA8B;gBAC5C,iIAAW,CAAC,aAAa;YAC3B,SAAU;gBACR,aAAa;YACf;QACF;QAEA;IACF,GAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,iBAAyB;QAC5C,IAAI;YACF,MAAM,WAAW,MAAM,iIAAW,CAAC,KAAK,CAAC;gBAAE;gBAAiB;YAAS;YACrE,QAAQ,SAAS,IAAI;QACvB,EAAE,OAAO,OAAO;YACd,MAAM;QACR;IACF;IAEA,MAAM,WAAW,OAAO;QAQtB,IAAI;YACF,MAAM,iIAAW,CAAC,QAAQ,CAAC;QAC3B,6CAA6C;QAC/C,EAAE,OAAO,OAAO;YACd,MAAM;QACR;IACF;IAEA,MAAM,SAAS;QACb,IAAI;YACF,MAAM,iIAAW,CAAC,MAAM;YACxB,QAAQ;QACV,EAAE,OAAO,OAAO;YACd,uDAAuD;YACvD,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,iIAAW,CAAC,aAAa;YACzB,QAAQ;QACV;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,QAAQ;IACV;IAEA,MAAM,QAAyB;QAC7B;QACA;QACA;QACA;QACA;QACA;QACA;IACF;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;kBAC1B;;;;;;AAGP;AAEO,MAAM,UAAU;IACrB,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 678, "column": 0}, "map": {"version":3,"sources":["file:///Users/keluch/Desktop/coledj/4year/coursework2/georgian_restaurant_web/src/lib/api/config.ts"],"sourcesContent":["// API Configuration\nexport const API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL || 'http://localhost:3000';\n\nexport const API_ENDPOINTS = {\n  // Health\n  health: '/health',\n  healthDb: '/health/db',\n  healthDbInfo: '/health/db/info',\n  \n  // Auth (будущие эндпоинты)\n  login: '/auth/login',\n  register: '/auth/register',\n  profile: '/auth/profile',\n  \n  // Restaurants\n  restaurants: '/restaurants',\n  restaurantsActive: '/restaurants/active',\n  \n  // Menu\n  menu: '/menu',\n  menuCategories: '/menu/categories',\n  menuItems: '/menu/items',\n  \n  // Tables\n  tables: '/tables',\n  tablesAvailable: '/tables/available',\n  \n  // Reservations\n  reservations: '/reservations',\n  reservationsUser: '/reservations/user',\n  \n  // Orders\n  orders: '/orders',\n  ordersUser: '/orders/user',\n  \n  // Audit\n  audit: '/audit',\n  auditRecent: '/audit/recent',\n  auditStatistics: '/audit/statistics',\n} as const;\n\nexport const HTTP_STATUS = {\n  OK: 200,\n  CREATED: 201,\n  BAD_REQUEST: 400,\n  UNAUTHORIZED: 401,\n  FORBIDDEN: 403,\n  NOT_FOUND: 404,\n  INTERNAL_SERVER_ERROR: 500,\n} as const;"],"names":[],"mappings":"AAAA,oBAAoB;;;;;;;;;AACb,MAAM,eAAe,6DAAwC;AAE7D,MAAM,gBAAgB;IAC3B,SAAS;IACT,QAAQ;IACR,UAAU;IACV,cAAc;IAEd,2BAA2B;IAC3B,OAAO;IACP,UAAU;IACV,SAAS;IAET,cAAc;IACd,aAAa;IACb,mBAAmB;IAEnB,OAAO;IACP,MAAM;IACN,gBAAgB;IAChB,WAAW;IAEX,SAAS;IACT,QAAQ;IACR,iBAAiB;IAEjB,eAAe;IACf,cAAc;IACd,kBAAkB;IAElB,SAAS;IACT,QAAQ;IACR,YAAY;IAEZ,QAAQ;IACR,OAAO;IACP,aAAa;IACb,iBAAiB;AACnB;AAEO,MAAM,cAAc;IACzB,IAAI;IACJ,SAAS;IACT,aAAa;IACb,cAAc;IACd,WAAW;IACX,WAAW;IACX,uBAAuB;AACzB","debugId":null}},
    {"offset": {"line": 731, "column": 0}, "map": {"version":3,"sources":["file:///Users/keluch/Desktop/coledj/4year/coursework2/georgian_restaurant_web/src/lib/api/client.ts"],"sourcesContent":["import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from 'axios';\nimport { API_BASE_URL } from './config';\n\n// Создаем экземпляр axios с базовой конфигурацией\nexport const apiClient: AxiosInstance = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Типы для API ответов\nexport interface ApiResponse<T = any> {\n  data: T;\n  message?: string;\n  status: number;\n}\n\nexport interface ApiError {\n  message: string;\n  status: number;\n  error?: string;\n}\n\n// Интерцептор запросов - добавляем JWT токен если есть\napiClient.interceptors.request.use(\n  (config) => {\n    // Получаем токен из localStorage\n    if (typeof window !== 'undefined') {\n      const token = localStorage.getItem('georgian_restaurant_token');\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Интерцептор ответов - обработка ошибок\napiClient.interceptors.response.use(\n  (response: AxiosResponse) => {\n    return response;\n  },\n  (error) => {\n    const apiError: ApiError = {\n      message: error.response?.data?.message || error.message || 'Неизвестная ошибка',\n      status: error.response?.status || 500,\n      error: error.response?.data?.error,\n    };\n\n    // Если 401 - перенаправляем на логин\n    if (error.response?.status === 401) {\n      if (typeof window !== 'undefined') {\n        localStorage.removeItem('georgian_restaurant_token');\n        localStorage.removeItem('georgian_restaurant_user');\n        window.location.href = '/auth/login';\n      }\n    }\n\n    return Promise.reject(apiError);\n  }\n);\n\n// Вспомогательные функции для API запросов\nexport const api = {\n  get: <T = any>(url: string, config?: AxiosRequestConfig): Promise<T> =>\n    apiClient.get(url, config).then((response) => response.data),\n    \n  post: <T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> =>\n    apiClient.post(url, data, config).then((response) => response.data),\n    \n  put: <T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> =>\n    apiClient.put(url, data, config).then((response) => response.data),\n    \n  patch: <T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> =>\n    apiClient.patch(url, data, config).then((response) => response.data),\n    \n  delete: <T = any>(url: string, config?: AxiosRequestConfig): Promise<T> =>\n    apiClient.delete(url, config).then((response) => response.data),\n};"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAGO,MAAM,YAA2B,gJAAK,CAAC,MAAM,CAAC;IACnD,SAAS,2IAAY;IACrB,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAeA,uDAAuD;AACvD,UAAU,YAAY,CAAC,OAAO,CAAC,GAAG,CAChC,CAAC;IACC,iCAAiC;IACjC;;IAMA,OAAO;AACT,GACA,CAAC;IACC,OAAO,QAAQ,MAAM,CAAC;AACxB;AAGF,yCAAyC;AACzC,UAAU,YAAY,CAAC,QAAQ,CAAC,GAAG,CACjC,CAAC;IACC,OAAO;AACT,GACA,CAAC;IACC,MAAM,WAAqB;QACzB,SAAS,MAAM,QAAQ,EAAE,MAAM,WAAW,MAAM,OAAO,IAAI;QAC3D,QAAQ,MAAM,QAAQ,EAAE,UAAU;QAClC,OAAO,MAAM,QAAQ,EAAE,MAAM;IAC/B;IAEA,qCAAqC;IACrC,IAAI,MAAM,QAAQ,EAAE,WAAW,KAAK;QAClC;;IAKF;IAEA,OAAO,QAAQ,MAAM,CAAC;AACxB;AAIK,MAAM,MAAM;IACjB,KAAK,CAAU,KAAa,SAC1B,UAAU,GAAG,CAAC,KAAK,QAAQ,IAAI,CAAC,CAAC,WAAa,SAAS,IAAI;IAE7D,MAAM,CAAU,KAAa,MAAY,SACvC,UAAU,IAAI,CAAC,KAAK,MAAM,QAAQ,IAAI,CAAC,CAAC,WAAa,SAAS,IAAI;IAEpE,KAAK,CAAU,KAAa,MAAY,SACtC,UAAU,GAAG,CAAC,KAAK,MAAM,QAAQ,IAAI,CAAC,CAAC,WAAa,SAAS,IAAI;IAEnE,OAAO,CAAU,KAAa,MAAY,SACxC,UAAU,KAAK,CAAC,KAAK,MAAM,QAAQ,IAAI,CAAC,CAAC,WAAa,SAAS,IAAI;IAErE,QAAQ,CAAU,KAAa,SAC7B,UAAU,MAAM,CAAC,KAAK,QAAQ,IAAI,CAAC,CAAC,WAAa,SAAS,IAAI;AAClE","debugId":null}},
    {"offset": {"line": 784, "column": 0}, "map": {"version":3,"sources":["file:///Users/keluch/Desktop/coledj/4year/coursework2/georgian_restaurant_web/src/lib/api/cart.ts"],"sourcesContent":["import { apiClient } from './client';\n\n// Типы для корзины\nexport interface CartItem {\n  cart_item_id: number;\n  item_id: number;\n  item_name: string;\n  item_description: string;\n  unit_price: number;\n  quantity: number;\n  total_price: number;\n  added_at: string;\n  image_url: string | null;\n  category_name: string;\n  is_vegetarian: boolean;\n  is_spicy: boolean;\n}\n\nexport interface Cart {\n  cart_id: string;\n  user_id: string;\n  items: CartItem[];\n  total_items: number;\n  total_amount: number;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface AddToCartRequest {\n  item_id: number;\n  quantity: number;\n}\n\nexport interface UpdateCartItemRequest {\n  quantity: number;\n}\n\nexport class CartService {\n  private static instance: CartService;\n  \n  static getInstance(): CartService {\n    if (!CartService.instance) {\n      CartService.instance = new CartService();\n    }\n    return CartService.instance;\n  }\n\n  /**\n   * Получить корзину пользователя\n   */\n  async getCart(): Promise<Cart> {\n    try {\n      const response = await apiClient.get('/cart');\n      return response.data;\n    } catch (error: any) {\n      throw new Error(error.response?.data?.message || 'Ошибка получения корзины');\n    }\n  }\n\n  /**\n   * Добавить товар в корзину\n   */\n  async addToCart(itemId: number, quantity: number = 1): Promise<Cart> {\n    try {\n      const response = await apiClient.post('/cart/add', {\n        item_id: itemId,\n        quantity,\n      });\n      return response.data;\n    } catch (error: any) {\n      throw new Error(error.response?.data?.message || 'Ошибка добавления товара в корзину');\n    }\n  }\n\n  /**\n   * Обновить количество товара в корзине\n   */\n  async updateCartItem(itemId: number, quantity: number): Promise<Cart> {\n    try {\n      const response = await apiClient.put(`/cart/item/${itemId}`, {\n        quantity,\n      });\n      return response.data;\n    } catch (error: any) {\n      throw new Error(error.response?.data?.message || 'Ошибка обновления количества товара');\n    }\n  }\n\n  /**\n   * Удалить товар из корзины\n   */\n  async removeFromCart(itemId: number): Promise<Cart> {\n    try {\n      const response = await apiClient.delete(`/cart/item/${itemId}`);\n      return response.data;\n    } catch (error: any) {\n      throw new Error(error.response?.data?.message || 'Ошибка удаления товара из корзины');\n    }\n  }\n\n  /**\n   * Очистить корзину полностью\n   */\n  async clearCart(): Promise<{ message: string }> {\n    try {\n      const response = await apiClient.delete('/cart/clear');\n      return response.data;\n    } catch (error: any) {\n      throw new Error(error.response?.data?.message || 'Ошибка очистки корзины');\n    }\n  }\n}\n\nexport const cartService = CartService.getInstance();"],"names":[],"mappings":";;;;;;AAAA;;AAqCO,MAAM;IACX,OAAe,SAAsB;IAErC,OAAO,cAA2B;QAChC,IAAI,CAAC,YAAY,QAAQ,EAAE;YACzB,YAAY,QAAQ,GAAG,IAAI;QAC7B;QACA,OAAO,YAAY,QAAQ;IAC7B;IAEA;;GAEC,GACD,MAAM,UAAyB;QAC7B,IAAI;YACF,MAAM,WAAW,MAAM,wIAAS,CAAC,GAAG,CAAC;YACrC,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAY;YACnB,MAAM,IAAI,MAAM,MAAM,QAAQ,EAAE,MAAM,WAAW;QACnD;IACF;IAEA;;GAEC,GACD,MAAM,UAAU,MAAc,EAAE,WAAmB,CAAC,EAAiB;QACnE,IAAI;YACF,MAAM,WAAW,MAAM,wIAAS,CAAC,IAAI,CAAC,aAAa;gBACjD,SAAS;gBACT;YACF;YACA,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAY;YACnB,MAAM,IAAI,MAAM,MAAM,QAAQ,EAAE,MAAM,WAAW;QACnD;IACF;IAEA;;GAEC,GACD,MAAM,eAAe,MAAc,EAAE,QAAgB,EAAiB;QACpE,IAAI;YACF,MAAM,WAAW,MAAM,wIAAS,CAAC,GAAG,CAAC,CAAC,WAAW,EAAE,QAAQ,EAAE;gBAC3D;YACF;YACA,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAY;YACnB,MAAM,IAAI,MAAM,MAAM,QAAQ,EAAE,MAAM,WAAW;QACnD;IACF;IAEA;;GAEC,GACD,MAAM,eAAe,MAAc,EAAiB;QAClD,IAAI;YACF,MAAM,WAAW,MAAM,wIAAS,CAAC,MAAM,CAAC,CAAC,WAAW,EAAE,QAAQ;YAC9D,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAY;YACnB,MAAM,IAAI,MAAM,MAAM,QAAQ,EAAE,MAAM,WAAW;QACnD;IACF;IAEA;;GAEC,GACD,MAAM,YAA0C;QAC9C,IAAI;YACF,MAAM,WAAW,MAAM,wIAAS,CAAC,MAAM,CAAC;YACxC,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAY;YACnB,MAAM,IAAI,MAAM,MAAM,QAAQ,EAAE,MAAM,WAAW;QACnD;IACF;AACF;AAEO,MAAM,cAAc,YAAY,WAAW","debugId":null}},
    {"offset": {"line": 861, "column": 0}, "map": {"version":3,"sources":["file:///Users/keluch/Desktop/coledj/4year/coursework2/georgian_restaurant_web/src/lib/cart-context.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useState, useCallback, useEffect } from 'react';\nimport { Cart, CartItem, cartService } from '@/lib/api/cart';\nimport { useAuth } from './auth-context';\n\ninterface CartContextType {\n  cart: Cart | null;\n  loading: boolean;\n  error: string | null;\n  addToCart: (itemId: number, quantity?: number) => Promise<void>;\n  updateCartItem: (itemId: number, quantity: number) => Promise<void>;\n  removeFromCart: (itemId: number) => Promise<void>;\n  clearCart: () => Promise<void>;\n  refreshCart: () => Promise<void>;\n  getTotalItems: () => number;\n  getTotalAmount: () => number;\n}\n\nconst CartContext = createContext<CartContextType | undefined>(undefined);\n\nexport const useCart = () => {\n  const context = useContext(CartContext);\n  if (context === undefined) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n};\n\ninterface CartProviderProps {\n  children: React.ReactNode;\n}\n\nexport const CartProvider: React.FC<CartProviderProps> = ({ children }) => {\n  const [cart, setCart] = useState<Cart | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const { user, isAuthenticated } = useAuth();\n\n  // Функция для обработки ошибок\n  const handleError = (error: any, defaultMessage: string) => {\n    const errorMessage = error?.message || defaultMessage;\n    setError(errorMessage);\n    console.error(errorMessage, error);\n  };\n\n  // Загрузка корзины\n  const refreshCart = useCallback(async () => {\n    if (!isAuthenticated || !user || user.role !== 'user') {\n      setCart(null);\n      setError(null);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(null);\n      const cartData = await cartService.getCart();\n      setCart(cartData);\n    } catch (error: any) {\n      // Если корзина пуста (404), это нормально\n      if (error.message?.includes('404') || error.message?.includes('не найдена') || error.status === 404) {\n        setCart(null);\n        setError(null);\n      } else {\n        handleError(error, 'Ошибка загрузки корзины');\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [isAuthenticated, user]);\n\n  // Добавить товар в корзину\n  const addToCart = useCallback(async (itemId: number, quantity: number = 1) => {\n    if (!isAuthenticated) {\n      setError('Необходимо войти в систему для добавления товаров в корзину');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(null);\n      const updatedCart = await cartService.addToCart(itemId, quantity);\n      setCart(updatedCart);\n    } catch (error: any) {\n      handleError(error, 'Ошибка добавления товара в корзину');\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  }, [isAuthenticated]);\n\n  // Обновить количество товара\n  const updateCartItem = useCallback(async (itemId: number, quantity: number) => {\n    const previousCart = cart;\n    \n    try {\n      setError(null);\n      \n      // Оптимистичное обновление: обновляем UI сразу\n      if (cart) {\n        const updatedItems = cart.items.map(item => \n          item.item_id === itemId \n            ? { ...item, quantity, total_price: item.unit_price * quantity }\n            : item\n        );\n        \n        const totalItems = updatedItems.reduce((sum, item) => sum + item.quantity, 0);\n        const totalAmount = updatedItems.reduce((sum, item) => sum + item.total_price, 0);\n        \n        setCart({\n          ...cart,\n          items: updatedItems,\n          total_items: totalItems,\n          total_amount: totalAmount\n        });\n      }\n      \n      // Отправляем запрос на сервер\n      const updatedCart = await cartService.updateCartItem(itemId, quantity);\n      setCart(updatedCart);\n    } catch (error: any) {\n      // Откатываем изменения в случае ошибки\n      setCart(previousCart);\n      handleError(error, 'Ошибка обновления количества товара');\n      throw error;\n    }\n  }, [cart]);\n\n  // Удалить товар из корзины\n  const removeFromCart = useCallback(async (itemId: number) => {\n    try {\n      setLoading(true);\n      setError(null);\n      const updatedCart = await cartService.removeFromCart(itemId);\n      setCart(updatedCart);\n    } catch (error: any) {\n      handleError(error, 'Ошибка удаления товара из корзины');\n      // В случае ошибки показываем ошибку, но не перезагружаем всю корзину\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Очистить корзину\n  const clearCart = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      await cartService.clearCart();\n      setCart(null);\n    } catch (error: any) {\n      handleError(error, 'Ошибка очистки корзины');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Получить общее количество товаров\n  const getTotalItems = useCallback(() => {\n    return cart?.total_items || 0;\n  }, [cart]);\n\n  // Получить общую сумму\n  const getTotalAmount = useCallback(() => {\n    return cart?.total_amount || 0;\n  }, [cart]);\n\n  // Загружаем корзину только когда пользователь авторизован\n  useEffect(() => {\n    if (isAuthenticated && user?.role === 'user') {\n      refreshCart();\n    } else {\n      setCart(null);\n      setError(null);\n    }\n  }, [isAuthenticated, user, refreshCart]);\n\n  const value: CartContextType = {\n    cart,\n    loading,\n    error,\n    addToCart,\n    updateCartItem,\n    removeFromCart,\n    clearCart,\n    refreshCart,\n    getTotalItems,\n    getTotalAmount,\n  };\n\n  return (\n    <CartContext.Provider value={value}>\n      {children}\n    </CartContext.Provider>\n  );\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1071, "column": 0}, "map": {"version":3,"sources":["file:///Users/keluch/Desktop/coledj/4year/coursework2/georgian_restaurant_web/src/components/layout/Header.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { \n  AppBar, \n  Toolbar, \n  Typography, \n  Box, \n  Button,\n  Container,\n  Menu,\n  MenuItem,\n  Avatar\n} from '@mui/material';\nimport { useRouter, usePathname } from 'next/navigation';\nimport RestaurantIcon from '@mui/icons-material/Restaurant';\nimport PersonIcon from '@mui/icons-material/Person';\nimport ExitToAppIcon from '@mui/icons-material/ExitToApp';\nimport ShoppingCartIcon from '@mui/icons-material/ShoppingCart';\nimport { Badge, IconButton } from '@mui/material';\nimport { useAuth } from '@/lib/auth-context';\nimport { useCart } from '@/lib/cart-context';\n\nconst Header: React.FC = () => {\n  const router = useRouter();\n  const pathname = usePathname();\n  const { user, isAuthenticated, logout } = useAuth();\n  const { getTotalItems } = useCart();\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n\n  // Навигационные элементы в зависимости от статуса авторизации\n  const getNavigationItems = () => {\n    const baseItems = [\n      { label: 'Меню', path: '/' },\n      { label: 'Рестораны', path: '/restaurants' },\n      { label: 'О нас', path: '/about' },\n    ];\n\n    if (!isAuthenticated) {\n      return [\n        ...baseItems,\n        { label: 'Вход', path: '/auth/login' },\n      ];\n    }\n\n    // Для авторизованных пользователей - добавляем пункты в зависимости от роли\n    if (user?.role === 'user') {\n      return baseItems; // Профиль будет в выпадающем меню\n    }\n\n    return baseItems; // Для admin/manager тоже базовые пункты\n  };\n\n  const handleNavigation = (path: string) => {\n    router.push(path);\n  };\n\n  const handleProfileMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleProfileMenuClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleProfileClick = () => {\n    handleProfileMenuClose();\n    router.push('/profile');\n  };\n\n  const handleLogout = async () => {\n    handleProfileMenuClose();\n    try {\n      await logout();\n      router.push('/');\n    } catch (error) {\n      console.error('Logout failed:', error);\n      // Все равно перенаправляем на главную\n      router.push('/');\n    }\n  };\n\n  const navigationItems = getNavigationItems();\n\n  return (\n    <AppBar position=\"sticky\" sx={{ backgroundColor: '#2E7D32' }}>\n      <Container maxWidth=\"lg\">\n        <Toolbar sx={{ justifyContent: 'space-between' }}>\n          {/* Логотип и название */}\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <RestaurantIcon sx={{ fontSize: 32 }} />\n            <Typography \n              variant=\"h5\" \n              component=\"div\" \n              sx={{ \n                fontWeight: 'bold',\n                cursor: 'pointer'\n              }}\n              onClick={() => handleNavigation('/')}\n            >\n              Грузинская Кухня\n            </Typography>\n          </Box>\n\n          {/* Навигационное меню */}\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            {navigationItems.map((item) => (\n              <Button\n                key={item.path}\n                color=\"inherit\"\n                onClick={() => handleNavigation(item.path)}\n                sx={{\n                  fontWeight: pathname === item.path ? 'bold' : 'normal',\n                  backgroundColor: pathname === item.path ? 'rgba(255, 255, 255, 0.1)' : 'transparent',\n                  '&:hover': {\n                    backgroundColor: 'rgba(255, 255, 255, 0.2)',\n                  },\n                  borderRadius: 1,\n                  px: 3,\n                  py: 1,\n                }}\n              >\n                {item.label}\n              </Button>\n            ))}\n\n            {/* Кнопка корзины для авторизованных пользователей-клиентов */}\n            {isAuthenticated && user?.role === 'user' && (\n              <IconButton\n                color=\"inherit\"\n                onClick={() => handleNavigation('/cart')}\n                sx={{\n                  '&:hover': {\n                    backgroundColor: 'rgba(255, 255, 255, 0.2)',\n                  },\n                }}\n              >\n                <Badge badgeContent={getTotalItems()} color=\"error\">\n                  <ShoppingCartIcon />\n                </Badge>\n              </IconButton>\n            )}\n\n            {/* Меню профиля для авторизованных пользователей */}\n            {isAuthenticated && (\n              <>\n                <Button\n                  color=\"inherit\"\n                  onClick={handleProfileMenuOpen}\n                  startIcon={<Avatar sx={{ width: 24, height: 24, bgcolor: '#1B5E20' }}>\n                    <PersonIcon sx={{ fontSize: 16 }} />\n                  </Avatar>}\n                  sx={{\n                    borderRadius: 1,\n                    px: 2,\n                    py: 1,\n                    '&:hover': {\n                      backgroundColor: 'rgba(255, 255, 255, 0.2)',\n                    },\n                  }}\n                >\n                  {user?.first_name}\n                </Button>\n                \n                <Menu\n                  anchorEl={anchorEl}\n                  open={Boolean(anchorEl)}\n                  onClose={handleProfileMenuClose}\n                  anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'right',\n                  }}\n                  transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right',\n                  }}\n                >\n                  {user?.role === 'user' && (\n                    <MenuItem onClick={handleProfileClick}>\n                      <PersonIcon sx={{ mr: 1 }} />\n                      Профиль\n                    </MenuItem>\n                  )}\n                  \n                  <MenuItem onClick={handleLogout}>\n                    <ExitToAppIcon sx={{ mr: 1 }} />\n                    Выход\n                  </MenuItem>\n                </Menu>\n              </>\n            )}\n          </Box>\n        </Toolbar>\n      </Container>\n    </AppBar>\n  );\n};\n\nexport default Header;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1395, "column": 0}, "map": {"version":3,"sources":["file:///Users/keluch/Desktop/coledj/4year/coursework2/georgian_restaurant_web/src/components/layout/Footer.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { \n  Box, \n  Typography, \n  Container, \n  Link,\n  Divider \n} from '@mui/material';\nimport PhoneIcon from '@mui/icons-material/Phone';\nimport EmailIcon from '@mui/icons-material/Email';\nimport LocationOnIcon from '@mui/icons-material/LocationOn';\n\nconst Footer: React.FC = () => {\n  const currentYear = new Date().getFullYear();\n\n  return (\n    <Box\n      component=\"footer\"\n      sx={{\n        mt: 'auto',\n        py: 4,\n        backgroundColor: '#1B5E20',\n        color: 'white',\n      }}\n    >\n      <Container maxWidth=\"lg\">\n        <Box \n          sx={{ \n            display: 'grid', \n            gridTemplateColumns: { xs: '1fr', sm: '1fr 1fr', md: '1fr 1fr 1fr' },\n            gap: 4 \n          }}\n        >\n          {/* Информация о ресторане */}\n          <Box>\n            <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 'bold' }}>\n              Грузинская Кухня\n            </Typography>\n            <Typography variant=\"body2\" sx={{ mb: 2, lineHeight: 1.8 }}>\n              Аутентичные грузинские блюда, приготовленные по традиционным рецептам. \n              Окунитесь в мир настоящих вкусов Грузии!\n            </Typography>\n          </Box>\n\n          {/* Контактная информация */}\n          <Box>\n            <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 'bold' }}>\n              Контакты\n            </Typography>\n            <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1 }}>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                <PhoneIcon fontSize=\"small\" />\n                <Typography variant=\"body2\">+995 555 123 456</Typography>\n              </Box>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                <EmailIcon fontSize=\"small\" />\n                <Typography variant=\"body2\">info@georgian-cuisine.ge</Typography>\n              </Box>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                <LocationOnIcon fontSize=\"small\" />\n                <Typography variant=\"body2\">Тбилиси, ул. Руставели, 15</Typography>\n              </Box>\n            </Box>\n          </Box>\n\n          {/* Навигация */}\n          <Box>\n            <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 'bold' }}>\n              Навигация\n            </Typography>\n            <Box sx={{ display: 'flex', flexDirection: 'column', gap: 0.5 }}>\n              <Link \n                href=\"/\" \n                color=\"inherit\" \n                underline=\"hover\"\n                sx={{ fontSize: '0.875rem' }}\n              >\n                Меню\n              </Link>\n              <Link \n                href=\"/restaurants\" \n                color=\"inherit\" \n                underline=\"hover\"\n                sx={{ fontSize: '0.875rem' }}\n              >\n                Рестораны\n              </Link>\n              <Link \n                href=\"/about\" \n                color=\"inherit\" \n                underline=\"hover\"\n                sx={{ fontSize: '0.875rem' }}\n              >\n                О нас\n              </Link>\n            </Box>\n          </Box>\n        </Box>\n\n        <Divider sx={{ my: 3, backgroundColor: 'rgba(255, 255, 255, 0.2)' }} />\n\n        {/* Копирайт */}\n        <Box sx={{ textAlign: 'center' }}>\n          <Typography variant=\"body2\" sx={{ opacity: 0.8 }}>\n            © {currentYear} Грузинская Кухня. Все права защищены.\n          </Typography>\n        </Box>\n      </Container>\n    </Box>\n  );\n};\n\nexport default Footer;"],"names":[],"mappings":";;;;;AAGA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AAZA;;;;;;AAcA,MAAM,SAAmB;IACvB,MAAM,cAAc,IAAI,OAAO,WAAW;IAE1C,qBACE,8OAAC,+LAAG;QACF,WAAU;QACV,IAAI;YACF,IAAI;YACJ,IAAI;YACJ,iBAAiB;YACjB,OAAO;QACT;kBAEA,cAAA,8OAAC,uNAAS;YAAC,UAAS;;8BAClB,8OAAC,+LAAG;oBACF,IAAI;wBACF,SAAS;wBACT,qBAAqB;4BAAE,IAAI;4BAAO,IAAI;4BAAW,IAAI;wBAAc;wBACnE,KAAK;oBACP;;sCAGA,8OAAC,+LAAG;;8CACF,8OAAC,2NAAU;oCAAC,SAAQ;oCAAK,YAAY;oCAAC,IAAI;wCAAE,YAAY;oCAAO;8CAAG;;;;;;8CAGlE,8OAAC,2NAAU;oCAAC,SAAQ;oCAAQ,IAAI;wCAAE,IAAI;wCAAG,YAAY;oCAAI;8CAAG;;;;;;;;;;;;sCAO9D,8OAAC,+LAAG;;8CACF,8OAAC,2NAAU;oCAAC,SAAQ;oCAAK,YAAY;oCAAC,IAAI;wCAAE,YAAY;oCAAO;8CAAG;;;;;;8CAGlE,8OAAC,+LAAG;oCAAC,IAAI;wCAAE,SAAS;wCAAQ,eAAe;wCAAU,KAAK;oCAAE;;sDAC1D,8OAAC,+LAAG;4CAAC,IAAI;gDAAE,SAAS;gDAAQ,YAAY;gDAAU,KAAK;4CAAE;;8DACvD,8OAAC,qKAAS;oDAAC,UAAS;;;;;;8DACpB,8OAAC,2NAAU;oDAAC,SAAQ;8DAAQ;;;;;;;;;;;;sDAE9B,8OAAC,+LAAG;4CAAC,IAAI;gDAAE,SAAS;gDAAQ,YAAY;gDAAU,KAAK;4CAAE;;8DACvD,8OAAC,qKAAS;oDAAC,UAAS;;;;;;8DACpB,8OAAC,2NAAU;oDAAC,SAAQ;8DAAQ;;;;;;;;;;;;sDAE9B,8OAAC,+LAAG;4CAAC,IAAI;gDAAE,SAAS;gDAAQ,YAAY;gDAAU,KAAK;4CAAE;;8DACvD,8OAAC,0KAAc;oDAAC,UAAS;;;;;;8DACzB,8OAAC,2NAAU;oDAAC,SAAQ;8DAAQ;;;;;;;;;;;;;;;;;;;;;;;;sCAMlC,8OAAC,+LAAG;;8CACF,8OAAC,2NAAU;oCAAC,SAAQ;oCAAK,YAAY;oCAAC,IAAI;wCAAE,YAAY;oCAAO;8CAAG;;;;;;8CAGlE,8OAAC,+LAAG;oCAAC,IAAI;wCAAE,SAAS;wCAAQ,eAAe;wCAAU,KAAK;oCAAI;;sDAC5D,8OAAC,mMAAI;4CACH,MAAK;4CACL,OAAM;4CACN,WAAU;4CACV,IAAI;gDAAE,UAAU;4CAAW;sDAC5B;;;;;;sDAGD,8OAAC,mMAAI;4CACH,MAAK;4CACL,OAAM;4CACN,WAAU;4CACV,IAAI;gDAAE,UAAU;4CAAW;sDAC5B;;;;;;sDAGD,8OAAC,mMAAI;4CACH,MAAK;4CACL,OAAM;4CACN,WAAU;4CACV,IAAI;gDAAE,UAAU;4CAAW;sDAC5B;;;;;;;;;;;;;;;;;;;;;;;;8BAOP,8OAAC,+MAAO;oBAAC,IAAI;wBAAE,IAAI;wBAAG,iBAAiB;oBAA2B;;;;;;8BAGlE,8OAAC,+LAAG;oBAAC,IAAI;wBAAE,WAAW;oBAAS;8BAC7B,cAAA,8OAAC,2NAAU;wBAAC,SAAQ;wBAAQ,IAAI;4BAAE,SAAS;wBAAI;;4BAAG;4BAC7C;4BAAY;;;;;;;;;;;;;;;;;;;;;;;AAM3B;uCAEe","debugId":null}},
    {"offset": {"line": 1716, "column": 0}, "map": {"version":3,"sources":["file:///Users/keluch/Desktop/coledj/4year/coursework2/georgian_restaurant_web/src/components/layout/LayoutWrapper.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { Box } from '@mui/material';\nimport Header from '@/components/layout/Header';\nimport Footer from '@/components/layout/Footer';\n\ninterface LayoutWrapperProps {\n  children: React.ReactNode;\n}\n\nexport default function LayoutWrapper({ children }: LayoutWrapperProps) {\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        flexDirection: 'column',\n        minHeight: '100vh',\n      }}\n    >\n      <Header />\n      <Box component=\"main\" sx={{ flexGrow: 1 }}>\n        {children}\n      </Box>\n      <Footer />\n    </Box>\n  );\n}"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AALA;;;;;AAWe,SAAS,cAAc,EAAE,QAAQ,EAAsB;IACpE,qBACE,8OAAC,+LAAG;QACF,IAAI;YACF,SAAS;YACT,eAAe;YACf,WAAW;QACb;;0BAEA,8OAAC,iJAAM;;;;;0BACP,8OAAC,+LAAG;gBAAC,WAAU;gBAAO,IAAI;oBAAE,UAAU;gBAAE;0BACrC;;;;;;0BAEH,8OAAC,iJAAM;;;;;;;;;;;AAGb","debugId":null}}]
}